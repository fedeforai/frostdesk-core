# Supabase (Dashboard → Settings → API)
SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co
SUPABASE_ANON_KEY=<anon-public-key-from-dashboard>
SUPABASE_SERVICE_ROLE_KEY=<service-role-secret-from-dashboard-never-commit>
# Pooler: password in URI must be URL-encoded (e.g. ! → %21). For local dev add ?sslmode=require
# DATABASE_URL=postgresql://postgres.YOUR_PROJECT_REF:[YOUR-PASSWORD]@aws-1-eu-west-1.pooler.supabase.com:5432/postgres?sslmode=require
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.YOUR_PROJECT_REF.supabase.co:5432/postgres

# OpenAI
OPENAI_API_KEY=your_openai_api_key

# Database
# DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# WhatsApp Cloud API (human-triggered outbound only)
# Required for: approve draft, manual send (POST /webhook/whatsapp uses same token for inbound ack if needed)
META_WHATSAPP_TOKEN=<from-meta-developer-console>
META_WHATSAPP_PHONE_NUMBER_ID=<phone-number-id>

# Meta webhook verification (GET /webhook — challenge response)
META_VERIFY_TOKEN=<your-verify-token>
# WhatsApp webhook GET verification (or use META_VERIFY_TOKEN above)
# META_WHATSAPP_VERIFY_TOKEN=<same-as-meta-verify-token-field>

# Meta webhook POST signature (App Secret; used to verify X-Hub-Signature-256 on /webhook/whatsapp)
META_WHATSAPP_APP_SECRET=<your-meta-app-secret>

# AI Emergency Kill Switch
# Set to "true" to disable AI globally (absolute priority over DB flags)
# AI_EMERGENCY_DISABLE=true

# AI Feature Flags (default ON; set to '0' to disable)
ENABLE_AI_SUMMARY=1
ENABLE_AI_USAGE_TELEMETRY=1

# What3Words (meeting point precision: convert address ↔ three words)
# Get a key at https://developer.what3words.com/ — used to suggest/validate meeting point codes
# WHAT3WORDS_API_KEY=your_what3words_api_key

# WhatsApp inbound: assign new conversations to this instructor (UUID from instructor_profiles.id / user_id).
# Set to the maestro's profile id so they see messages in Inbox. Unset = instructor_id 1 (legacy).
# DEFAULT_INSTRUCTOR_ID=59a7c6d1-cfdc-40d6-b509-56d53c213477

# Paid pilot gating (API): comma-separated instructor UUIDs allowed to create bookings, edit bookings, cancel, create customers, add notes.
# Empty or unset = no pilots (gated mutations return 402 PILOT_ONLY). GET list/detail remain readable.
# PILOT_INSTRUCTOR_IDS=uuid1,uuid2

# Stripe Connect (payment links for instructor bookings)
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# Instructor app URL (for Stripe return/refresh URLs)
# INSTRUCTOR_APP_URL=http://localhost:3000

# ── Report archival & cron ──────────────────────────────────────────────
# Secret shared between Vercel cron route and Fastify store endpoint
# Generate with: openssl rand -hex 32
# ADMIN_REPORTS_CRON_SECRET=your_cron_secret_here

# Vercel Cron secret (set in Vercel project settings → Environment Variables)
# Vercel injects this and sends it as Authorization: Bearer <CRON_SECRET>
# CRON_SECRET=your_vercel_cron_secret_here

# Supabase Storage bucket name for report archival (default: reports)
# REPORTS_BUCKET_NAME=reports

# Local/Pilot only
# ALLOW_DEBUG_USER=1 enables debug-user access to admin inbox
# ALLOW_DEBUG_USER=1
